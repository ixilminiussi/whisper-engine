#ifndef WSP_MATERIAL
#define WSP_MATERIAL

#include <wsp_devkit.hpp>
#include <wsp_global_ubo.hpp>
#include <wsp_texture.hpp>

#include <string>
#include <vector>

#include <.generated/wsp_material.generated.hpp>

class cgltf_material;
class cgltf_texture;

namespace wsp
{

WCLASS()
class Material
{
  public:
    struct CreateInfo
    {
        class Texture *albedo{nullptr};
        class Texture *normal{nullptr};
        class Texture *metallicRoughness{nullptr};
        class Texture *occlusion{nullptr};

        glm::vec3 albedoColor{};
        glm::vec3 fresnelColor{};

        float roughness{0.};
        float metallic{0.};
        float anisotropy{0.};

        std::string name{""};
    };

    static void PopulateTextureCreateInfo(cgltf_material const *, cgltf_texture const *pTexture,
                                          std::vector<Texture::CreateInfo> *);
    static CreateInfo GetCreateInfoFromGlTF(cgltf_material const *, cgltf_texture const *pTexture,
                                            std::vector<Texture *> const &);

    Material(CreateInfo const &);

    void GetInfo(ubo::Material *) const;

    int GetID() const;
    void SetID(int ID);

    WCLASS_BODY$Material();

    std::string const &GetName() const;

  protected:
    std::string const _name;

    int _ID;

    class Texture *_albedoTexture;
    class Texture *_normalTexture;
    class Texture *_metallicRoughnessTexture;
    class Texture *_occlusionTexture;

    WPROPERTY(eColor)
    glm::vec3 _albedoColor;
    WPROPERTY(eColor)
    glm::vec3 _fresnelColor;

    WPROPERTY(eSlider, 0.f, 1.f)
    float _roughness;
    WPROPERTY(eSlider, 0.f, 1.f)
    float _metallic;
    WPROPERTY(eSlider, 0.f, 1.f)
    float _anisotropy;
};

} // namespace wsp

WGENERATED_META_DATA()

#endif
